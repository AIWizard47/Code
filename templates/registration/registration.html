<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>

  <style>
    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #1a1a1a;
    }
    ::-webkit-scrollbar-thumb {
      background: #444;
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #666;
    }

    /* Alert animation */
    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .alert-fade-in {
      animation: fadeInDown 0.5s ease-out forwards;
    }

    /* Input styles */
    .input-focus-glow {
      background-color: #111;
      border: 1px solid #333;
      color: #f1f1f1;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.7);
      transition: all 0.2s ease-in-out;
    }
    .input-focus-glow::placeholder {
      color: #666;
    }
    .input-focus-glow:focus {
      outline: none;
      border-color: #6366f1;
      box-shadow: 0 0 8px rgba(99, 102, 241, 0.6);
    }

    /* Button hover/active */
    .submit-button-effect:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(99, 102, 241, 0.4);
    }
    .submit-button-effect:active {
      transform: translateY(0);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
    }
  </style>
</head>
<body class="bg-gradient-to-br from-black via-gray-900 to-black min-h-screen font-sans text-gray-100 flex items-center justify-center p-4">

  <div class="bg-gray-900/90 p-8 rounded-2xl shadow-[0_0_25px_rgba(0,0,0,0.8)] w-full max-w-md border border-gray-800 backdrop-blur">
    <h2 class="text-3xl font-extrabold text-center text-white mb-6">Create Your Account</h2>

    <!-- Django Form Errors Display -->
    {% if messages %}
      {% for message in messages %}
        <div class="bg-red-900/30 border border-red-600 text-red-400 px-4 py-3 rounded-lg relative mb-6 alert-fade-in" role="alert">
          <strong class="font-bold">Error!</strong>
          <span class="block sm:inline">{{ message }}</span>
          <span class="absolute top-0 bottom-0 right-0 px-4 py-3 cursor-pointer" onclick="this.parentElement.style.display='none';">
            <svg class="fill-current h-6 w-6 text-red-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Close</title><path d="M14.348 14.849a1.2 1.2 0 01-1.697 0L10 11.196l-2.651 2.652a1.2 1.2 0 01-1.697-1.697L8.303 9.5 5.652 6.849a1.2 1.2 0 011.697-1.697L10 7.803l2.651-2.651a1.2 1.2 0 011.697 1.697L11.696 9.5l2.652 2.651a1.2 1.2 0 010 1.698z"/></svg>
          </span>
        </div>
      {% endfor %}
    {% endif %}

    {% if form.errors and not messages %}
      <div class="bg-red-900/30 border border-red-600 text-red-400 px-4 py-3 rounded-lg relative mb-6 alert-fade-in" role="alert">
        <strong class="font-bold">Validation Error!</strong>
        {% for field, errors in form.errors.items %}
          {% if field == '__all__' %}
            <span class="block sm:inline">{{ errors | join:", " }}</span>
          {% endif %}
        {% endfor %}
        <span class="absolute top-0 bottom-0 right-0 px-4 py-3 cursor-pointer" onclick="this.parentElement.style.display='none';">
          <svg class="fill-current h-6 w-6 text-red-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Close</title><path d="M14.348 14.849a1.2 1.2 0 01-1.697 0L10 11.196l-2.651 2.652a1.2 1.2 0 01-1.697-1.697L8.303 9.5 5.652 6.849a1.2 1.2 0 011.697-1.697L10 7.803l2.651-2.651a1.2 1.2 0 011.697 1.697L11.696 9.5l2.652 2.651a1.2 1.2 0 010 1.698z"/></svg>
        </span>
      </div>
    {% endif %}

    {% if error %}
      <div class="bg-red-900/30 border border-red-600 text-red-400 px-4 py-3 rounded-lg relative mb-6 alert-fade-in" role="alert">
        <strong class="font-bold">Error!</strong>
        <span class="block sm:inline">{{ error }}</span>
      </div>
    {% endif %}

    <form method="post" action="{% url 'register' %}" class="space-y-5">
      {% csrf_token %}

      <!-- Username -->
      <div>
        <label for="username" class="block text-sm font-medium text-gray-300 mb-1">Username</label>
        <input type="text" name="username" id="username" placeholder="Enter your username" required
               class="mt-1 block w-full px-4 py-2 rounded-lg sm:text-sm input-focus-glow">
        {% if form.username.errors %}
          <p class="mt-1 text-sm text-red-400">{{ form.username.errors|join:", " }}</p>
        {% endif %}
      </div>

      <!-- Email -->
      <div>
        <label for="email" class="block text-sm font-medium text-gray-300 mb-1">Email</label>
        <input type="email" name="email" id="email" placeholder="Enter your email" required
               class="mt-1 block w-full px-4 py-2 rounded-lg sm:text-sm input-focus-glow">
        {% if form.email.errors %}
          <p class="mt-1 text-sm text-red-400">{{ form.email.errors|join:", " }}</p>
        {% endif %}
      </div>

      <!-- Password -->
      <div>
        <label for="password" class="block text-sm font-medium text-gray-300 mb-1">Password</label>
        <input type="password" name="password" id="password" placeholder="Create a password" required
               class="mt-1 block w-full px-4 py-2 rounded-lg sm:text-sm input-focus-glow">
        {% if form.password.errors %}
          <p class="mt-1 text-sm text-red-400">{{ form.password.errors|join:", " }}</p>
        {% endif %}
      </div>

      <!-- Confirm Password -->
      <div>
        <label for="confirm_password" class="block text-sm font-medium text-gray-300 mb-1">Confirm Password</label>
        <input type="password" name="confirm_password" id="confirm_password" placeholder="Confirm your password" required
               class="mt-1 block w-full px-4 py-2 rounded-lg sm:text-sm input-focus-glow">
        {% if form.confirm_password.errors %}
          <p class="mt-1 text-sm text-red-400">{{ form.confirm_password.errors|join:", " }}</p>
        {% endif %}
      </div>

      <div class="g-recaptcha" data-sitekey="6LdsI3orAAAAAKlV2rPygBa3H9_yPxQI8MlK7fZO"></div>

      <!-- Submit -->
      <div>
        <button type="submit" class="w-full px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-900 transition-all duration-200 transform submit-button-effect">
          Register
        </button>
      </div>

      <p class="text-center text-sm text-gray-400">
        Already have an account? 
        <a href="{% url 'login' %}" class="font-medium text-indigo-400 hover:text-indigo-300 transition duration-200">Login here</a>
      </p>
    </form>
  </div>

</body>
</html>