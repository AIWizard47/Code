<h2>{{ contest.name }}</h2>
<p>Start: {{ contest.start_time }} | End: {{ contest.end_time }}</p>

{% if now < contest.start_time %}
  <p><strong>This contest has not started yet.</strong></p>
{% elif now > contest.end_time %}
  <p><strong>This contest has ended.</strong></p>
{% else %}
  <div id="timer" style="font-weight:bold; font-size:1.2em; color:green;"></div>
  <script>
    const endTime = new Date("{{ contest.end_time|date:'c' }}").getTime();
    const timerElement = document.getElementById("timer");

    function updateTimer() {
        const now = new Date().getTime();
        const diff = endTime - now;

        if (diff <= 0) {
            timerElement.textContent = "Contest has ended.";
            if (window.editor) {
                window.editor.updateOptions({readOnly: true});
            }
            if (document.getElementById("submitButton")) {
                document.getElementById("submitButton").disabled = true;
            }
            clearInterval(timerInterval);
            return;
        }

        const hours = Math.floor(diff / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        timerElement.textContent = "Time Remaining: " + hours + "h " + minutes + "m " + seconds + "s";
    }

    const timerInterval = setInterval(updateTimer, 1000);
    updateTimer();
  </script>

  <h3>Problems</h3>
  <ul>
    {% for problem in problems %}
      <li><a href="{% url 'problem_detail' problem.id %}">{{ problem.title }}</a></li>
    {% endfor %}
  </ul>
{% endif %}
